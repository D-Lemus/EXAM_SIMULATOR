<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UABC Entrance Exam</title>
    <link rel="stylesheet" href="style.css">
     <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>

    <div class="sidebar" id="sidebar">
        <!-- Este es el bot√≥n de usuario en la barra de navegaci√≥n que queremos modificar -->
        <a href="#" id="userBtn" class="user-btn">US</a>
        <div class="divider"></div>
        <a href="/" class="exam-btn home-btn">Inicio</a>
        <a href="Examen_mate.html" class="exam-btn math-btn">Matem√°ticas</a>
        <a href="Examen_Lenguaje.html" class="exam-btn language-btn">Lenguaje</a>
        <a href="Examen_Ciencias.html" class="exam-btn science-btn">Ciencias</a>
        <a href="#" id="logoutBtnSidebar" class="exam-btn logout-btn">Cerrar Sesi√≥n</a>
    </div>
    
    <!--Logic of the side bar-->
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            if (mainContent) mainContent.classList.toggle('shifted');
            
            // Cambiar el √≠cono del bot√≥n
            if (sidebar.classList.contains('active')) {
                sidebarToggle.innerHTML = '‚úï';
                sidebarToggle.style.left = '260px'; // Mover el bot√≥n con el sidebar
            } else {
                sidebarToggle.innerHTML = '‚ò∞';
                sidebarToggle.style.left = '10px';
            }
        });
    </script>
    
    <div class="user-profile">
        <div class="user-avatar" id="userAvatar">US</div>
        <div class="user-name">Usuario Estudiante</div>
        <div class="user-email">usuario@ejemplo.com</div>
        <!-- Este bot√≥n mantendr√° su funcionalidad de logout -->
        <button id="logoutBtn" class="logout-button">Cerrar Sesi√≥n</button>
    </div>
    
    <div class="progress-container">
        <div class="progress-title">
            <span>
                <span class="subject-icon">üìê</span>
                Progreso de Matem√°ticas
            </span>
            <span class="progress-percent">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill math-progress" style="width: 0%"></div>
        </div>
    </div>
    
    <div class="progress-container">
        <div class="progress-title">
            <span>
                <span class="subject-icon">üìñ</span>
                Progreso de Lenguaje
            </span>
            <span class="progress-percent">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill language-progress" style="width: 0%"></div>
        </div>
    </div>
    
    <div class="progress-container">
        <div class="progress-title">
            <span>
                <span class="subject-icon">üî¨</span>
                Progreso de Ciencias
            </span>
            <span class="progress-percent">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill science-progress" style="width: 0%"></div>
        </div>
    </div>
    
    <div class="progress-container total-container">
        <div class="progress-title">
            <span class="total-title">
                <span class="subject-icon">üèÜ</span>
                Progreso Total
            </span>
            <span class="progress-percent total-percent">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill total-progress" style="width: 0%"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="auth.js"></script>
    <script src="user-progress.js"></script>
    <script src="ai-tutor.js"></script>
    
    <script>
    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded, setting up buttons');
        
        // Solo modificaremos el bot√≥n de usuario en la barra de navegaci√≥n
        setupUserNavButton();
    });
    
    // Funci√≥n para configurar √∫nicamente el bot√≥n de usuario en la barra de navegaci√≥n
    function setupUserNavButton() {
        // Obtener el bot√≥n de usuario en la barra de navegaci√≥n
        const userBtn = document.getElementById('userBtn');
        
        // Verificar si el bot√≥n existe y agregar el event listener
        if (userBtn) {
            console.log('Bot√≥n de usuario en la barra de navegaci√≥n encontrado, configurando redirecci√≥n a exam.html');
            
            // Eliminar cualquier event listener existente clonando el elemento
            const newUserBtn = userBtn.cloneNode(true);
            userBtn.parentNode.replaceChild(newUserBtn, userBtn);
            
            // Agregar nuevo event listener para redirigir a exam.html
            newUserBtn.addEventListener('click', function(e) {
                console.log('Bot√≥n de usuario en la barra de navegaci√≥n clickeado, redirigiendo a exam.html');
                e.preventDefault();
                window.location.href = 'exam.html';
            });
        } else {
            console.warn('Bot√≥n de usuario en la barra de navegaci√≥n no encontrado');
        }
        
        // Mantener la funci√≥n original para el cierre de sesi√≥n
        // No modificamos los botones de cerrar sesi√≥n
    }
    </script>
</body>
</html>