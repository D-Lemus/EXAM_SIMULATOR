<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Preparate para tu examen UABC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="home.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="images/logo_white.png" alt="Logo" height="30">
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
               <ul class="navbar-nav ms-auto">
    <li class="nav-item me-4">
        <a class="nav-link" href="#profesores" style="color: white;">Profesores</a>
    </li>
    <li class="nav-item me-4">
        <a class="nav-link" href="#programas" style="color: white;">Nuestros Programas</a>
    </li>
    <li class="nav-item me-4">
        <a class="nav-link" href="#sobre-nosotros" style="color: white;">Nosotros</a>
    </li>
    <li class="nav-item me-4">
        <a class="nav-link" href="#contacto" style="color: white;">Contáctanos</a>
    </li>
    <!-- usuarios NO autenticados -->
    <li class="nav-item me-4" id="login-btn">
        <a class="nav-link btn btn-ingresar ms-3" href="#login">Ingresar</a>
    </li>
    <!-- usuarios autenticados (inicialmente ocultos) -->
    <li class="nav-item me-4" id="user-profile-btn" style="display: none;">
        <a class="nav-link btn btn-primary" href="/exam.html">
            <i class="bi bi-person-circle"></i> 
            <span id="userName">Usuario</span>
        </a>
    </li>
    <li class="nav-item me-4" id="admin-btn" style="display: none;">
        <a class="nav-link btn btn-warning" href="/admin">Administración</a>
    </li>
    <li class="nav-item me-4" id="logout-btn" style="display: none;">
        <a class="nav-link btn btn-outline-danger" href="#" onclick="cerrarSesion(); return false;">
            Cerrar Sesión
        </a>
    </li>
</ul>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>
 
</div>
<div class="fondo-portada">
    <img src="images/cohete.png" alt="Cohete" class="imagen-cohete">
    <img src="images/planeta.png" alt="Planeta" class="imagen-planeta">
    <img src="images/reloj.png" alt="Reloj de Arena" class="imagen-reloj">
    <img src="images/libro.png" alt="Libro abierto" class="imagen-libro">
    <img src="images/libro.png" alt="Libro abierto" class="imagen-libro">

    <img src="images/portada.png" alt="Prepárate para tu examen UABC y asegura tu lugar" class="imagen-text">

</div> 
<!-- NOSOTROS -->
<section id="sobre-nosotros" style="margin: 0; padding: 0;">
  <div class="container-padre">
    <img src="images/megafono.png" alt="Megafono" class="imagen-megafono">
    <div class="container-hijo">
      <h2 class="section-title">
        <span style="color: white;">SOBRE</span>
        <span style="color: #f1cb42;">NOSOTROS</span>
      </h2>
      <div class="row justify-content-center">
        <div class="col-md-10">
          <img src="images/chat.png" alt="Chat" class="imagen-chat">
          <p>
            En <span style="font-weight: 600;">GRADIENT</span>, somos un grupo de jóvenes comprometidos con la educación y
            la igualdad de oportunidades. Sabemos que el proceso de admisión a la <span style="font-weight: 600;">UABC</span>
            puede ser un reto, y no todos tienen acceso a cursos costosos para prepararse.
          </p>
          <p>
            Por eso, hemos creado este simulador de examen, diseñado para ayudarte a
            practicar y mejorar tus conocimientos sin que el dinero sea una barrera.
            Nuestro objetivo es brindar una herramienta accesible y efectiva para que más
            estudiantes puedan alcanzar su meta de entrar a la universidad. Creemos en el
            poder del esfuerzo, la dedicación y el apoyo mutuo para lograr grandes cosas.
          </p>
          <p>
            Únete a nosotros y prepárate para tu futuro con un simulador hecho por
            estudiantes, para estudiantes.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PROGRAMAS -->
  
<section id="programas">
  <div class="container-padre">
    <img src="images/educativos.png" alt="Etiqueta educativos" class="imagen-edu">
    <img src="images/cohete_fuego.png" alt="Cohete despegando" class="imagen-cohetefuego">
    <img src="images/brain.png" alt="Lapiz" class="imagen-brain">

    <div class="container-contenido">
      <h2 class="titulo"> <span style="color: #242424;">NUESTROS</span></h2>
      <h2 class="titulo2"> <span style="color: white;">PROGRAMAS</span></h2>
      
<div class="notebook-container">
  <!-- LECTURA CARD -->
  <div class="notebook-card card-lectura">
      <!-- Pestañas -->
      <div class="notebook-tab right-tab tab-1"></div>
      <div class="notebook-tab right-tab tab-2"></div>
      <div class="notebook-tab right-tab tab-3"></div>
      
      <div class="card-content">
          <img src="images/book.png" alt="Libro abierto" class="imagen-card">
          <h3 class="title-card">Lectura</h3>
          <p class="txt-card">Lorem ipsum es simplemente texto de relleno de la industria de impresión.</p>
      </div>
  </div>
  
  <!-- LENGUA ESCRITA CARD -->
  <div class="notebook-card card-lengua">
      <!-- Pestañas -->
      <div class="notebook-tab left-tab tab-1"></div>
      <div class="notebook-tab left-tab tab-2"></div>
      <div class="notebook-tab left-tab tab-3"></div>
      
      <!-- Pestañas  -->
      <div class="notebook-tab right-tab tab-1"></div>
      <div class="notebook-tab right-tab tab-2"></div>
      <div class="notebook-tab right-tab tab-3"></div>
      
      <div class="card-content">
          <img src="images/lapiz.png" alt="Lapiz" class="imagen-card">
          <h3 class="title-card">Lengua Escrita</h3>
          <p class="txt-card">Lorem ipsum es simplemente texto de relleno de la industria de impresión.</p>
      </div>
  </div>
  
  <!-- MATE CARD -->
  <div class="notebook-card card-matematicas">
      <!-- Pestañas  -->
      <div class="notebook-tab left-tab tab-1"></div>
      <div class="notebook-tab left-tab tab-2"></div>
      <div class="notebook-tab left-tab tab-3"></div>
      
      <div class="card-content">
          <img src="images/pi.png" alt="Pi" class="imagen-card">
          <h3 class="title-card">Matemáticas</h3>
          <p class="txt-card">Lorem ipsum es simplemente texto de relleno de la industria de impresión.</p>
      </div>
  </div>
</div>
    </div>
  </div>
</section>

<!-- PROFESORES -->
  <section id="profesores">
    <div class="container-padre">
      <div class="container-contenido">
        <h2 class="section-title">
          <span style="color: white;">PROFESORES</span>
        </h2>
        <p>
          En <span style="font-weight: 600;">GRADIENT</span>, creemos que la mejor preparación viene de quienes han demostrado excelencia en el mismo reto que enfrentarás. <span style="font-weight: 600;">Adrián Felix </span> es prueba de ello. Joven estudiante de Física Matemáticas en la UABC, logró posicionarse en el Top 1 del examen de admisión, demostrando un dominio absoluto de los conocimientos requeridos para ingresar a la universidad. Si alguien sabe cómo superar este desafío, es él. Ahora, está aquí para guiarte a hacer lo mismo.
        </p>
        <img src="images/pilabook.png" alt="montaña de libros" class="imagen-pila">
      </div>
    </div>
  </section>

<!-- CONTACTO -->
  <section id="contacto" style="margin: 0; padding: 0;">
    <div class="container-padre">
      <div class="container-hijo">
      <h3> Contacto </h3>
      <h2>¿Tienes alguna pregunta? ¡Estamos aquí para ayudarte! </h2>

      <div class="contact-buttons">
          <div class="contact-button">
              <a href="https://wa.me/3171288580" target="_blank">
                  <div class="icon" style="background-image: url(images/whatsapp.png);"></div>
                  <span class="text-link">+52 317 128 8580</span>
              </a>
          </div>

          <div class="contact-button">
              <a href="mailto:esi@iteso.mx">
                  <div class="icon" style="background-image: url(images/mail.png);"></div>
                  <span class="text-link">esi@iteso.mx</span>
              </a>
          </div>

          <div class="contact-button">
              <a href="tel:3171288580">
                  <div class="icon" style="background-image: url(images/call.png);"></div>
                  <span class="text-link">+52 317 128 8580</span>
              </a>
          </div>
      </div>
    
      <h1>¡Queremos conocerte!</h1>
      <h2>Síguenos en nuestras redes sociales y sé parte de nuestra comunidad.</h2>

      <div class="social-container">
          <div class="social-button">
              <a href="https://www.youtube.com/user/itesouniversidad" target="_blank">
                  <div class="social-icon" style="background-image: url(images/youtube.png);"></div>
              </a>
          </div>
          <div class="social-button">
              <a href="https://www.facebook.com/ITESO/?locale=es_LA" target="_blank">
                  <div class="social-icon" style="background-image: url(images/fb.png);"></div>
              </a>
          </div>
          <div class="social-button">
              <a href="https://www.instagram.com/itesouniversidad/?hl=es" target="_blank">
                  <div class="social-icon" style="background-image: url(images/instagram.png);"></div>
              </a>
          </div>
          <div class="social-button">
              <a href="https://www.tiktok.com/@itesouniversidad" target="_blank">
                  <div class="social-icon" style="background-image: url(images/tiktok.png);"></div>
              </a>
          </div>
          </div>
      </div>
    </div>

  </section>

<!-- FOOTER -->
  <footer>
    <div class="container text-center">
      <p>© 2025 GRADIENT - Todos los derechos reservados</p>
    </div>

<!-- CREDITOS -->
<div class="names-container">
  <div id="diego-container" class="name-container">
    <div class="last-name">LEMUS</div>
    <div class="first-name">Diego</div>
  </div>
  
  <div id="josue-container" class="name-container">
    <div class="last-name">GODOY</div>
    <div class="first-name">Josue</div>
  </div>
  
  <div id="karen-container" class="name-container">
    <div class="last-name">SANTANA</div>
    <div class="first-name">Karen</div>
  </div>
</div>

  </footer>


  <!-- LOGIN -->
  <div class="modal fade" id="loginModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Ingresar</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="email" class="form-label">Correo</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input type="password" class="form-control" id="password" required>
            </div>
            <div class="mb-3 text-center">
              <button type="submit" class="btn btn-primary w-100">Entrar</button>
            </div>
            <div class="text-center">
              <p>¿No tienes cuenta? <a href="#" data-bs-toggle="modal" data-bs-target="#registroModal" data-bs-dismiss="modal">Regístrate</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- REGISTRO -->
  <div class="modal fade" id="registroModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Registro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="row mb-3">
              <div class="col">
                <label for="nombre" class="form-label">Nombre(s)</label>
                <input type="text" class="form-control" id="nombre" required>
              </div>
              <div class="col">
                <label for="apellido" class="form-label">Apellido(s)</label>
                <input type="text" class="form-control" id="apellido" required>
              </div>
            </div>
            <div class="mb-3">
              <label for="regEmail" class="form-label">Correo</label>
              <input type="email" class="form-control" id="regEmail" required>
            </div>
            <div class="row mb-3">
              <div class="col">
                <label for="regPassword" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="regPassword" required>
              </div>
              <div class="col">
                <label for="confirmPassword" class="form-label">Confirmar contraseña</label>
                <input type="password" class="form-control" id="confirmPassword" required>
              </div>
            </div>
            <div class="mb-3 text-center">
              <button type="submit" class="btn btn-primary w-100">REGISTRATE AHORA</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS y Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Script para activar los modales
    document.addEventListener('DOMContentLoaded', function() {
      // Activar el modal de login cuando se hace clic en el botón Ingresar
      document.querySelector('a[href="#login"]').addEventListener('click', function(e) {
        e.preventDefault();
        new bootstrap.Modal(document.getElementById('loginModal')).show();
      });
    });
  </script>
  <!-- Scripts de autenticación -->
<script src="auth.js"></script>

<script>
// Lista de emails con permisos de administrador - MODIFICA ESTA LISTA CON TU EMAIL
const ADMIN_EMAILS = ['josuegodor@gmail.com', 'diegolemus.2015@example.com', 'ADMIN@admin.com' ]; 

// Función principal para actualizar los elementos de la interfaz según el estado de autenticación
async function actualizarUISegunAutenticacion() {
    try {
        console.log("Verificando estado de autenticación...");
        
        // Elementos del DOM
        const loginBtn = document.getElementById('login-btn');
        const userProfileBtn = document.getElementById('user-profile-btn');
        const adminBtn = document.getElementById('admin-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const userName = document.getElementById('userName');
        
        // Obtener el estado de autenticación actual
        const userData = await obtenerUsuario();
        console.log("Datos de usuario:", userData);
        
        if (userData.success && userData.user) {
            // Usuario autenticado
            console.log("Usuario autenticado:", userData.user);
            
            // Ocultar botón de login
            if (loginBtn) loginBtn.style.display = 'none';
            
            // Mostrar botones de usuario y logout
            if (userProfileBtn) userProfileBtn.style.display = 'block';
            if (logoutBtn) logoutBtn.style.display = 'block';
            
            // Actualizar nombre de usuario si está disponible
            if (userName && userData.user.nombre) {
                userName.textContent = userData.user.nombre.split(' ')[0] || 'Usuario';
            }
            
            // Verificar si el usuario es administrador por su email
            if (userData.user.email && ADMIN_EMAILS.includes(userData.user.email)) {
                console.log("Usuario es administrador:", userData.user.email);
                if (adminBtn) adminBtn.style.display = 'block';
            } else {
                console.log("Usuario no es administrador:", userData.user.email);
                if (adminBtn) adminBtn.style.display = 'none';
            }
        } else {
            // Usuario no autenticado
            console.log("Usuario no autenticado");
            
            // Mostrar botón de login
            if (loginBtn) loginBtn.style.display = 'block';
            
            // Ocultar botones de usuario, admin y logout
            if (userProfileBtn) userProfileBtn.style.display = 'none';
            if (adminBtn) adminBtn.style.display = 'none';
            if (logoutBtn) logoutBtn.style.display = 'none';
        }
    } catch (error) {
        console.error('Error al verificar autenticación:', error);
    }
}

// Esperar a que el DOM esté completamente cargado
document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM cargado, configurando interfaz...");
    
    // Añadir Bootstrap Icons si no están ya incluidos
    if (!document.querySelector('link[href*="bootstrap-icons"]')) {
        const iconLink = document.createElement('link');
        iconLink.rel = 'stylesheet';
        iconLink.href = 'https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css';
        document.head.appendChild(iconLink);
    }
    
    // Configurar el modal de login
    const loginLink = document.querySelector('a[href="#login"]');
    if (loginLink) {
        loginLink.addEventListener('click', function(e) {
            e.preventDefault();
            new bootstrap.Modal(document.getElementById('loginModal')).show();
        });
    }
    
    // Actualizar la interfaz inmediatamente
    actualizarUISegunAutenticacion();

        document.querySelectorAll('.modal .btn-close, .modal [data-bs-dismiss="modal"]').forEach(button => {
        button.addEventListener('click', function() {
            setTimeout(limpiarBackdrop, 300); // Esperar a que termine la animación
        });
    });
});

// Asegurarnos de que se verifique el estado incluso si la página se carga desde caché
window.addEventListener('pageshow', function(event) {
    // El evento pageshow se dispara incluso cuando la página se carga desde caché
    if (event.persisted) {
        console.log("Página cargada desde caché, actualizando estado...");
        actualizarUISegunAutenticacion();
    }
});

// Configurar los formularios de login y registro
function configurarFormularios() {
    // Configurar formulario de login
    const loginForm = document.querySelector('#loginModal form');
    if (loginForm) {
        loginForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                alert('Por favor, completa todos los campos');
                return;
            }
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;
            submitBtn.textContent = 'Iniciando sesión...';
            submitBtn.disabled = true;
            
            try {
                const resultado = await iniciarSesion(email, password);
                
                if (resultado.success) {
                    // Cerrar modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                    if (modal) modal.hide();
                    
                    // Actualizar UI antes de redirigir
                    await actualizarUISegunAutenticacion();
                    
                    // Redirigir
                    window.location.href = '/exam.html';
                } else {
                    alert(resultado.msg || 'Error al iniciar sesión. Verifica tus credenciales.');
                }
            } catch (error) {
                console.error("Error al iniciar sesión:", error);
                alert("Error de conexión. Intenta nuevamente.");
            } finally {
                submitBtn.textContent = originalBtnText;
                submitBtn.disabled = false;
            }
        });
    }
    
    // Configurar formulario de registro
    const registroForm = document.querySelector('#registroModal form');
    if (registroForm) {
        registroForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const nombre = document.getElementById('nombre').value.trim();
            const apellido = document.getElementById('apellido').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!nombre || !apellido || !email || !password || !confirmPassword) {
                alert('Por favor, completa todos los campos');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Las contraseñas no coinciden');
                return;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Por favor, introduce un correo electrónico válido');
                return;
            }
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;
            submitBtn.textContent = 'Registrando...';
            submitBtn.disabled = true;
            
            try {
                const nombreCompleto = nombre + ' ' + apellido;
                const resultado = await registrarUsuario(nombreCompleto, email, password);
                
                if (resultado.success) {
                    // Cerrar modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('registroModal'));
                    if (modal) modal.hide();
                    
                    // Actualizar UI antes de redirigir
                    await actualizarUISegunAutenticacion();
                    
                    // Redirigir
                    window.location.href = '/exam.html';
                } else {
                    alert(resultado.msg || 'Error al registrar usuario');
                }
            } catch (error) {
                console.error("Error al registrar:", error);
                alert("Error de conexión. Intenta nuevamente.");
            } finally {
                submitBtn.textContent = originalBtnText;
                submitBtn.disabled = false;
            }
        });
    }
}
document.addEventListener('DOMContentLoaded', configurarFormularios);

function limpiarBackdrop() {
  // Eliminar cualquier backdrop
  document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
  // Quitar clase modal-open del body
  document.body.classList.remove('modal-open');
  document.body.style.removeProperty('overflow');
  document.body.style.removeProperty('padding-right');
}
</script>

</body>
</html>