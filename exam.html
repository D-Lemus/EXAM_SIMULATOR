<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UABC Entrance Exam</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="exam-container">
        <header>
            <h1>UABC <span class="highlight">ENTRANCE</span> EXAM</h1>
            
            <div class="exam-info">
                <div class="timer">Time remaining: <span id="time-remaining">60:00</span></div>
                
                <div class="progress-section">
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="question-counter">
                        Question: <span id="questions-answered">0</span>/<span id="question-total">100</span>
                    </div>
                </div>
            </div>
        </header>
        
        <main id="exam-content">
            <!-- Questions will be loaded here -->
        </main>
        
        <footer>
            <button id="submit-btn" disabled>SUBMIT EXAM</button>
        </footer>
    </div>

    <script>
       // Wait for the page to load completely
       document.addEventListener('DOMContentLoaded', function() {
            // Load questions from JSON file
            fetch('questions.json')
                .then(response => response.json())
                .then(examQuestions => {
                    // Track user answers
                    let userAnswers = {};
                    
                    // Load questions
                    const examContent = document.getElementById('exam-content');
                    document.getElementById('question-total').textContent = examQuestions.length;
                    
                    // Generate HTML for each question
                    examQuestions.forEach((question, index) => {
                        const questionCard = document.createElement('div');
                        questionCard.className = 'question-card';
                        questionCard.id = 'question-' + question.id;
                        
                        // Create options HTML
                        let optionsHTML = '';
                        question.options.forEach((option, optIndex) => {
                            optionsHTML += `
                                <div class="option" data-question="${question.id}" data-option="${optIndex}">
                                    ${option}
                                </div>
                            `;
                        });
                        
                        // Build the full question card HTML
                        questionCard.innerHTML = `
                            <div class="question-text">${index + 1}. ${question.text}</div>
                            <div class="options-list">
                                ${optionsHTML}
                            </div>
                            <div class="feedback" id="feedback-${question.id}">
                                ${question.defaultFeedback}
                            </div>
                            <button class="ai-feedback-btn" id="ai-btn-${question.id}">
                                Didn't understand? Get AI explanation
                            </button>
                        `;
                        
                        examContent.appendChild(questionCard);
                    });
                    
                    // Add click events to all options
                    const options = document.querySelectorAll('.option');
                    options.forEach(option => {
                        option.addEventListener('click', function() {
                            const questionId = this.dataset.question;
                            const optionIndex = parseInt(this.dataset.option);
                            
                            // Remove 'selected' class from all options in this question
                            const questionOptions = document.querySelectorAll(`.option[data-question="${questionId}"]`);
                            questionOptions.forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            
                            // Add 'selected' class to clicked option
                            this.classList.add('selected');
                            
                            // Save the answer
                            userAnswers[questionId] = optionIndex;
                            
                            // Update progress
                            const answeredCount = Object.keys(userAnswers).length;
                            const totalQuestions = examQuestions.length;
                            
                            // Update counter and progress bar
                            document.getElementById('questions-answered').textContent = answeredCount;
                            const progressPercentage = (answeredCount / totalQuestions) * 100;
                            document.getElementById('progress-bar').style.width = progressPercentage + '%';
                            
                            // Enable submit button if all questions are answered
                            document.getElementById('submit-btn').disabled = !(answeredCount === totalQuestions);
                        });
                    });
                
            
            // Add event listener for submit button
            document.getElementById('submit-btn').addEventListener('click', function() {
                // Calculate score
                let score = 0;
                
                examQuestions.forEach(question => {
                    if (userAnswers[question.id] === question.correctAnswer) {
                        score++;
                    }
                });
                
                // Display results
                alert(`Exam submitted! Your score: ${score}/${examQuestions.length}`);
                
                // Show feedback for each question
                examQuestions.forEach(question => {
                    const feedbackElement = document.getElementById(`feedback-${question.id}`);
                    const aiButton = document.getElementById(`ai-btn-${question.id}`);
                    
                    // Show the feedback
                    feedbackElement.style.display = 'block';
                    aiButton.style.display = 'block';
                });
            });
            
            // Start timer
            let timeLeft = 60 * 60; // 60 minutes
            const timerElement = document.getElementById('time-remaining');
            
            const timerInterval = setInterval(() => {
                // Calculate minutes and seconds
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                // Update the display
                timerElement.textContent = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
                
                // Decrease time left
                timeLeft--;
                
                // Check if timer has finished
                if (timeLeft < 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = '0:00';
                    alert('Time is up! Submitting exam...');
                }
            }, 1000);
            
        });
       })
    </script>
</body>
</html>